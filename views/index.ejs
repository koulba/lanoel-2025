<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>LANoÃ«l 2025 â€” Accueil</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="/public/css/style.css" rel="stylesheet" />
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; background:#f5f5f5; color:#000; margin:0; padding:0; }
    .topbar { background:#000; color:#fff; padding:1rem 0; }
    .topbar .container { display:flex; justify-content:space-between; align-items:center; }
    .topbar .brand { font-size:1.8rem; font-weight:bold; }
    .topbar nav a.btn { display:inline-block; margin-left:1rem; padding:0.5rem 1rem; background:#fff; color:#000; border-radius:10px; text-decoration:none; transition:all 0.3s ease; }
    .topbar nav a.btn:hover { background:#333; color:#fff; }

    .container { max-width:1000px; margin:2rem auto; padding:0 1rem; }

    h2, h3 { margin-bottom:1rem; }

    .vote-counter { font-size:1.1rem; margin-bottom:1rem; text-align:center; color:#333; }

    .games-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px,1fr)); gap:1rem; }
    .card { background:#fff; border-radius:15px; overflow:hidden; box-shadow:0 5px 15px rgba(0,0,0,0.1); text-align:center; transition:transform 0.3s ease, box-shadow 0.3s ease; }
    .card:hover { transform:translateY(-5px); box-shadow:0 10px 25px rgba(0,0,0,0.15); }
    .card img { width:100%; height:150px; object-fit:cover; display:block; }
    .card h4 { margin:0.5rem 0; font-size:1.1rem; }
    .card p { font-size:0.9rem; color:#666; }

    /* Classement des Ã©quipes stylisÃ© */
    .leaderboard { margin-top:2rem; }
    .leaderboard h2 { text-align:center; margin-bottom:1.5rem; }

    .podium { display:flex; justify-content:center; gap:1rem; margin-bottom:2rem; }
    .podium .place { flex:1; max-width:150px; background:#fff; border-radius:12px; padding:1rem; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.1); }
    .podium .place h3 { margin:0; font-size:1rem; }
    .podium .place .points { font-weight:bold; color:#000; }
    .podium .first { border:3px solid gold; }
    .podium .second { border:3px solid silver; }
    .podium .third { border:3px solid #cd7f32; }

    .leaderboard-list { background:#fff; border-radius:12px; box-shadow:0 5px 15px rgba(0,0,0,0.1); overflow:hidden; }
    .leaderboard-list table { width:100%; border-collapse:collapse; }
    .leaderboard-list th, .leaderboard-list td { padding:0.8rem 1rem; border-bottom:1px solid #eee; }
    .leaderboard-list th { background:#fafafa; text-align:left; font-size:0.9rem; color:#333; }
    .leaderboard-list tr:hover { background:#f9f9f9; }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container">
<a href="/" class="brand">
  <img src="/public/images/lanoel.webp" alt="LANoÃ«l 2025" class="logo">
</a>

      <nav>
  <% if(!user) { %>
    <a class="btn" href="/login">Login</a>
    <a class="btn" href="/register">S'inscrire</a>
  <% } else { %>
    <span>Salut <%= user.pseudo %></span>
    <a class="btn" href="/vote">Voter ðŸŽ®</a>
    <a class="btn" href="/logout">Logout</a>
  <% } %>
</nav>
    </div>
  </header>

<div class="video-container" style="max-width:800px; margin:2rem auto; text-align:center;">
  <iframe 
    width="100%" 
    height="450" 
    src="https://www.youtube.com/embed/rfdHv5440s8?autoplay=1&mute=1&loop=1&playlist=rfdHv5440s8" 
    title="YouTube video player" 
    frameborder="0" 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
    allowfullscreen>
  </iframe>
</div>

  <main class="container">
    <% if(user){ %>
      <div class="vote-counter">
        Tu as votÃ© pour <strong><%= votesCount %></strong> / 8 jeux
      </div>
    <% } %>

    <!-- CLASSEMENT DES JEUX -->
    <section>
      <h2>Classement des jeux les plus votÃ©s</h2>
      <div class="games-grid">
        <% games.forEach(function(game){ %>
          <div class="card">
            <% if(game.image){ %>
              <img src="<%= game.image %>" alt="<%= game.name %>">
            <% } %>
            <h4><%= game.name %></h4>
            <p><%= game.description %></p>
            <p style="font-weight:bold; color:#000;"><%= game.votes_count %> votes</p>
          </div>
        <% }) %>
      </div>
    </section>

    <!-- CLASSEMENT DES Ã‰QUIPES -->
    <section class="leaderboard">
      <h2>Classement gÃ©nÃ©ral des Ã©quipes</h2>

      <% if(leaderboard.length > 0){ %>
        <div class="podium">
          <% if(leaderboard[1]){ %>
            <div class="place second">
              <h3><%= leaderboard[1].name %></h3>
              <div class="points"><%= leaderboard[1].total_points || 0 %> pts</div>
              ðŸ¥ˆ
            </div>
          <% } %>
          <% if(leaderboard[0]){ %>
            <div class="place first">
              <h3><%= leaderboard[0].name %></h3>
              <div class="points"><%= leaderboard[0].total_points || 0 %> pts</div>
              ðŸ¥‡
            </div>
          <% } %>
          <% if(leaderboard[2]){ %>
            <div class="place third">
              <h3><%= leaderboard[2].name %></h3>
              <div class="points"><%= leaderboard[2].total_points || 0 %> pts</div>
              ðŸ¥‰
            </div>
          <% } %>
        </div>
      <% } %>

      <div class="leaderboard-list">
        <table>
          <thead><tr><th>#</th><th>Ã‰quipe</th><th>Points</th></tr></thead>
          <tbody>
            <% leaderboard.forEach(function(row, index){ %>
              <tr>
                <td><%= index+1 %></td>
                <td><%= row.name %></td>
                <td><%= row.total_points || 0 %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <footer class="container" style="text-align:center; margin:2rem 0; color:#666;">
    LANoÃ«l 2025 - Tous droits rÃ©servÃ©s.
  </footer>
</body>
</html>
